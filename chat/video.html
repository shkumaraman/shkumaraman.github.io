<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TalkRush - Video Chat With Strangers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="TalkRush - Video chat with strangers like on Ome TV & Omegle. No signup. Make new friends instantly for free.">
  <meta name="keywords" content="TalkRush, free video chat, video chat with strangers, random video chat, no signup video chat, no login video chat, make friends online, random video call, Omegle alternative, Ome TV alternative, free video call app, meet strangers online, talkrush video chat">
  <meta name="author" content="Aman Kumar">
  <link rel="icon" type="image/png" href="logo.png">
  <meta property="og:image" content="https://shkumaraman.github.io/chat/logo.png">
  <meta property="og:title" content="TalkRush - Video Chat With Strangers">
  <meta property="og:description" content="TalkRush - Free random video chat with strangers. No signup needed. Make new friends instantly through video calls.">
  <meta property="og:type" content="website">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7059052735946479" crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-746R2BN26S"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-746R2BN26S');
  </script>  
  <style>
    :root {
      /* Dark Theme Colors */
      --dark-bg: #121212;
      --dark-header-bg: #181818;
      --dark-header-border: #2a2a2a;
      --dark-chat-bg: #1e1e1e;
      --dark-text: #fff;
      --dark-icon-color: #ccc;
      --dark-icon-hover: #fff;
      --dark-icon-hover-bg: rgba(255,255,255,0.1);
      --dark-system-msg: #aaa;
      --dark-scroll-track: #1e1e1e;
      --dark-scroll-thumb: #444;
      --dark-scroll-hover: #555;

      /* Light Theme Colors */
      --light-bg: #f5f5f5;
      --light-header-bg: #ffffff;
      --light-header-border: #e0e0e0;
      --light-chat-bg: #f9f9f9;
      --light-text: #333;
      --light-icon-color: #666;
      --light-icon-hover: #333;
      --light-icon-hover-bg: rgba(0,0,0,0.05);
      --light-system-msg: #777;
      --light-scroll-track: #f9f9f9;
      --light-scroll-thumb: #ccc;
      --light-scroll-hover: #aaa;

      /* Common Colors */
      --skip-btn: #ff4d4d;
      --skip-btn-hover: #ff3333;
      --share-btn: #25D366;
      --share-btn-hover: #128C7E;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      overflow-x: hidden;
    }
      
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--dark-bg);
      color: var(--dark-text);
      display: flex;
      flex-direction: column;
      height: 100vh;
      transition: background 0.3s, color 0.3s;
    }

    body.light-mode {
      background: var(--light-bg);
      color: var(--light-text);
    }

    .app-header {
      position: sticky;
      top: 0;
      width: 100%;
      height: 60px;
      background: var(--dark-header-bg);
      padding: 8px 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.4);
      border-bottom: 1px solid var(--dark-header-border);
      z-index: 10000;
    }

    .light-mode .app-header {
      background: var(--light-header-bg);
      border-bottom: 1px solid var(--light-header-border);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      height: 40px;
      width: 40px;
      border-radius: 10px;
    }

    .app-title {
      font-size: 1.5em;
      color: var(--dark-text);
      margin: 0;
    }

    .light-mode .app-title {
      color: var(--light-text);
    }

    .share-btn {
      background: var(--share-btn);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9em;
      transition: background 0.2s;
    }

    .share-btn:hover {
      background: var(--share-btn-hover);
    }

    .theme-toggle {
      background: none;
      border: none;
      color: var(--dark-icon-color);
      font-size: 1.1em;
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s;
    }

    .theme-toggle:hover {
      background: var(--dark-icon-hover-bg);
    }

    .light-mode .theme-toggle {
      color: var(--light-icon-color);
    }

    .light-mode .theme-toggle:hover {
      background: var(--light-icon-hover-bg);
    }

    .video-container {
      display: flex;
      flex-direction: column;
      height: calc(100vh - 60px);
      max-width: 1000px;
      margin: 0 auto;
      width: 100%;
      padding: 10px;
      background: var(--dark-chat-bg);
    }

    .light-mode .video-container {
      background: var(--light-chat-bg);
    }

    .remote-video-container {
      flex: 1;
      position: relative;
      background: #000;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .local-video-container {
      height: 200px;
      position: relative;
      background: #000;
      border-radius: 8px;
      overflow: hidden;
      align-self: flex-end;
      width: 150px;
      margin-right: 20px;
      margin-bottom: 20px;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .video-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #333;
      color: white;
      font-size: 1.2em;
    }

    .light-mode .video-placeholder {
      background: #e0e0e0;
      color: #333;
    }

    .controls {
      position: fixed;
      bottom: 0;
      right: 0;
      display: flex;
      padding: 10px;
      z-index: 1000;
    }

    #skipBtn {
      background: var(--skip-btn);
      border: none;
      padding: 12px;
      border-radius: 50%;
      color: white;
      cursor: pointer;
      font-size: 1em;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    #skipBtn:hover {
      background: var(--skip-btn-hover);
    }

    .system-msg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      text-align: center;
      z-index: 100;
    }

    .light-mode .system-msg {
      background: rgba(255,255,255,0.8);
      color: #333;
    }

    /* Responsive adjustments */
    @media (max-width: 600px) {
      .local-video-container {
        width: 120px;
        height: 160px;
        margin-right: 10px;
      }
      
      .share-btn span {
        display: none;
      }
      
      .share-btn {
        padding: 8px;
      }

      .header-right {
        gap: 5px;
      }
    }
  </style>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Is TalkRush video chat really free?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, TalkRush video chat is 100% free to use with no signup or hidden charges."
        }
      },
      {
        "@type": "Question",
        "name": "Can I video chat anonymously without login?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Absolutely! TalkRush doesn't require any login or registration to start video chatting."
        }
      }
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "TalkRush Video Chat",
    "url": "https://shkumaraman.github.io/chat/",
    "description": "Free anonymous video chat with strangers without registration",
    "applicationCategory": "CommunicationApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
</head>
<body>
  <header class="app-header">
    <div class="header-left">
      <img src="logo.png" alt="TalkRush Logo" class="logo">
      <h1 class="app-title">TalkRush</h1>
    </div>
    <div class="header-right">
      <button class="theme-toggle" id="themeToggle" title="Toggle Dark/Light Mode">
        <i class="fas fa-moon"></i>
      </button>
      <button class="share-btn" onclick="window.open('https://wa.me/?text=Try%20this%20free%20video%20chat:%20https://shkumaraman.github.io/chat', '_blank')">
        <i class="fab fa-whatsapp"></i>
        <span>Share</span>
      </button>
    </div>
  </header>

  <div class="video-container">
    <div class="remote-video-container">
      <video id="remoteVideo" autoplay playsinline></video>
      <div class="video-placeholder" id="remotePlaceholder">Waiting for stranger to connect...</div>
    </div>
    
    <div class="local-video-container">
      <video id="localVideo" autoplay playsinline muted></video>
      <div class="video-placeholder" id="localPlaceholder">You</div>
    </div>
    
    <div class="system-msg" id="systemMsg" style="display: none;"></div>
  </div>

  <div class="controls">
    <button id="skipBtn" title="Skip to next stranger"><i class="fas fa-random"></i></button>
  </div>

  <!-- Display Ads -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-7059052735946479"
       data-ad-slot="8592327962"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
    
  <main class="info-section" style="padding: 20px; max-width: 800px; margin: 0 auto;">
    <h2>TalkRush - Free Video Chat With Strangers Online</h2>
    <p>Welcome to <strong>TalkRush Video Chat</strong> – the best <strong>free Omegle alternative</strong> for <strong>video chatting with strangers</strong> online. Connect face-to-face with random people worldwide through our secure video chat platform.</p>
    
    <h2>How to Use TalkRush Video Chat</h2>
    <p>Using TalkRush Video Chat is simple! Just allow camera access when prompted. You'll see your video at the bottom. Click "Skip" to find a new random stranger instantly when you want to talk to someone else.</p>
    
    <h2>Why Choose TalkRush Video Chat?</h2>
    <p><strong>TalkRush Video Chat</strong> offers the fastest, easiest way to video chat with strangers:</p>
    <ul>
      <li><strong>No email or signup</strong> needed</li>
      <li><strong>Instant video connections</strong> with zero delay</li>
      <li><strong>Global user base</strong> – meet people from anywhere</li>
      <li>Works on <strong>desktop, Android, and iOS</strong> devices</li>
    </ul>
  </main>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-746R2BN26S"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-746R2BN26S');
  </script>
  
  <!-- PeerJS (v1.5.4) -->
  <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.bundle.min.js"></script> 
  <script>
    // Firebase config
    const firebaseConfig = {
      databaseURL: "https://talkrush-76259-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let peer, myConn, myId, waitingRef;
    let currentCall = null;
    let isConnected = false;
    let localStream = null;

    // DOM elements
    const remoteVideo = document.getElementById('remoteVideo');
    const localVideo = document.getElementById('localVideo');
    const remotePlaceholder = document.getElementById('remotePlaceholder');
    const localPlaceholder = document.getElementById('localPlaceholder');
    const systemMsg = document.getElementById('systemMsg');
    const skipBtn = document.getElementById('skipBtn');

    // Initialize video chat
    initVideoChat();

    async function initVideoChat() {
      try {
        // Get local video stream
        localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        localVideo.srcObject = localStream;
        localPlaceholder.style.display = 'none';
        
        // Initialize PeerJS connection
        startPeer();
      } catch (error) {
        console.error('Error accessing media devices:', error);
        showSystemMessage("Could not access camera/microphone. Please check permissions.");
      }
    }

    function startPeer() {
      // Reset connection status
      isConnected = false;
      
      // Clear remote video
      remoteVideo.srcObject = null;
      remotePlaceholder.style.display = 'flex';
      remotePlaceholder.textContent = "Looking for a stranger...";
      
      // Destroy existing peer if any
      if (peer) peer.destroy();
      if (currentCall) currentCall.close();
      
      // PeerJS configuration with STUN servers
      peer = new Peer({
        config: {
          iceServers: [
            { url: 'stun:stun.l.google.com:19302' },
            { url: 'stun:stun1.l.google.com:19302' },
            { url: 'stun:stun2.l.google.com:19302' },
            { url: 'stun:stun3.l.google.com:19302' },
            { url: 'stun:stun4.l.google.com:19302' }
          ]
        }
      });
      
      peer.on('open', (id) => {
        myId = id;
        tryToFindMatch();
      });
      
      peer.on('error', (err) => {
        console.error('PeerJS error:', err);
        showSystemMessage("Connection error. Trying again...");
        setTimeout(startPeer, 2000);
      });
      
      // Handle incoming calls
      peer.on('call', (call) => {
        if (!isConnected) {
          answerCall(call);
        }
      });
    }

    function tryToFindMatch() {
      waitingRef = db.ref("video_waiting");
      
      // First check if there are any existing waiting users
      waitingRef.once('value', (snapshot) => {
        const list = snapshot.val();
        if (list) {
          for (let [key, otherId] of Object.entries(list)) {
            if (otherId !== myId && !isConnected) {
              db.ref("video_waiting/" + key).remove();
              callPeer(otherId);
              return;
            }
          }
        }
        
        // If no match found and not already connected, add self to waiting list
        if (!isConnected) {
          const newRef = waitingRef.push();
          newRef.set(myId);
          
          // Then listen for new users being added to waiting list
          waitingRef.on('child_added', (childSnapshot) => {
            const otherId = childSnapshot.val();
            if (otherId !== myId && !isConnected) {
              // Remove both from waiting list
              waitingRef.off(); // Stop listening
              childSnapshot.ref.remove();
              db.ref("video_waiting").orderByValue().equalTo(myId).once('value', (snap) => {
                snap.forEach(child => child.ref.remove());
              });
              callPeer(otherId);
            }
          });
        }
      });
    }

    function callPeer(peerId) {
      if (isConnected) return;
      
      showSystemMessage("Connecting to stranger...");
      currentCall = peer.call(peerId, localStream);
      
      currentCall.on('stream', (remoteStream) => {
        remoteVideo.srcObject = remoteStream;
        remotePlaceholder.style.display = 'none';
        isConnected = true;
        hideSystemMessage();
      });
      
      currentCall.on('close', () => {
        endCall();
        showSystemMessage("Stranger disconnected");
        setTimeout(() => {
          if (!isConnected) {
            startPeer();
          }
        }, 1000);
      });
      
      currentCall.on('error', (err) => {
        console.error("Call error:", err);
        endCall();
        showSystemMessage("Connection failed. Trying again...");
        setTimeout(startPeer, 1000);
      });
    }

    function answerCall(call) {
      currentCall = call;
      
      showSystemMessage("Answering call...");
      currentCall.answer(localStream);
      
      currentCall.on('stream', (remoteStream) => {
        remoteVideo.srcObject = remoteStream;
        remotePlaceholder.style.display = 'none';
        isConnected = true;
        hideSystemMessage();
        
        // Clean up waiting status if we were waiting
        db.ref("video_waiting").orderByValue().equalTo(myId).once('value', (snap) => {
          snap.forEach(child => child.ref.remove());
        });
      });
      
      currentCall.on('close', () => {
        endCall();
        showSystemMessage("Stranger disconnected");
        setTimeout(() => {
          if (!isConnected) {
            startPeer();
          }
        }, 1000);
      });
      
      currentCall.on('error', (err) => {
        console.error("Call error:", err);
        endCall();
        showSystemMessage("Connection failed. Trying again...");
        setTimeout(startPeer, 1000);
      });
    }

    function endCall() {
      if (currentCall) {
        currentCall.close();
        currentCall = null;
      }
      remoteVideo.srcObject = null;
      remotePlaceholder.style.display = 'flex';
      isConnected = false;
    }

    // UI Functions
    function showSystemMessage(msg) {
      systemMsg.textContent = msg;
      systemMsg.style.display = 'block';
    }

    function hideSystemMessage() {
      systemMsg.style.display = 'none';
    }

    // Event Listeners
    skipBtn.addEventListener('click', () => {
      endCall();
      if (waitingRef) waitingRef.off();
      startPeer();
    });

    // Theme toggle functionality
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;

    // Check for saved theme preference or use preferred color scheme
    const savedTheme = localStorage.getItem('theme') || 
                      (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');

    // Apply the saved theme
    if (savedTheme === 'light') {
      body.classList.add('light-mode');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    } else {
      themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
    }

    // Toggle theme on button click
    themeToggle.addEventListener('click', () => {
      body.classList.toggle('light-mode');
      
      if (body.classList.contains('light-mode')) {
        localStorage.setItem('theme', 'light');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      } else {
        localStorage.setItem('theme', 'dark');
        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
      }
    });

    // Clean up on page unload
    window.addEventListener('beforeunload', () => {
      if (peer) peer.destroy();
      if (currentCall) currentCall.close();
      if (localStream) {
        localStream.getTracks().forEach(track => track.stop());
      }
      if (waitingRef) {
        db.ref("video_waiting").orderByValue().equalTo(myId).once('value', (snap) => {
          snap.forEach(child => child.ref.remove());
        });
      }
    });
  </script>
</body>
</html>
