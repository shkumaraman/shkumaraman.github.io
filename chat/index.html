<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TalkRush - Chat With Strangers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="TalkRush - Best free stranger chat app like Chitchat.gg, Omegle, Ome TV, and more. Chat anonymously with strangers without signup or login. Share images, make new friends instantly, and enjoy random video and text chat for free. Join TalkRush for unlimited stranger chats, image sharing, and building new connections easily.">
  <meta name="keywords" content="TalkRush, free stranger chat app, chat with strangers free, anonymous chat, no signup chat, no login chat, image sharing, make friends online, random chat app, Chitchat.gg alternative, Omegle alternative, Ome TV alternative, random video chat, free chat app, meet strangers online, talkrush chat">
  <meta name="author" content="Aman Kumar">
  <link rel="icon" type="image/png" href="logo.png">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.3/css/all.min.css">
  
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7059052735946479"crossorigin="anonymous"></script>
  
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #121212;
      color: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    
    /* Ad Container */
    .ad-container {
      width: 100%;
      padding: 10px;
      background: #1e1e1e;
      text-align: center;
      border-bottom: 1px solid #333;
    }
    
    .ad-banner {
      width: 100%;
      max-width: 728px;
      height: 90px;
      margin: 0 auto;
      background: #2b2b2b;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #aaa;
    }
    
    #chatLog {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background: #1e1e1e;
      display: flex;
      flex-direction: column;
    }
    
    .msg {
      margin: 10px 0;
      padding: 12px 15px;
      background: #2b2b2b;
      border-radius: 15px;
      max-width: 80%;
      word-wrap: break-word;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .me { 
      align-self: flex-end; 
      background: #007bff;
      border-bottom-right-radius: 5px;
    }
    
    .stranger { 
      align-self: flex-start;
      border-bottom-left-radius: 5px;
    }
    
    .timestamp {
      font-size: 0.7em;
      color: #aaa;
      margin-top: 5px;
      text-align: right;
    }

    .chat-controls {
      display: flex;
      align-items: center;
      padding: 15px;
      background: #181818;
    }
    
    #skipBtn {
      margin-right: 15px;
      background: #ff4d4d;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s;
    }
    
    #skipBtn:hover {
      background: #ff3333;
    }
    
    #skipBtn i {
      margin-right: 5px;
    }
    
    .input-area {
      flex: 1;
      position: relative;
    }
    
    #msgInput {
      width: 100%;
      padding: 12px 60px 12px 15px;
      border-radius: 25px;
      border: none;
      background: #333;
      color: white;
      font-size: 1em;
      outline: none;
    }
    
    #msgInput:focus {
      background: #444;
    }
    
    .input-icons {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      gap: 10px;
    }
    
    .icon-btn {
      background: none;
      border: none;
      color: #ccc;
      font-size: 1.2em;
      cursor: pointer;
      transition: color 0.2s;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }
    
    .icon-btn:hover { 
      color: #fff;
      background: rgba(255,255,255,0.1);
    }
    
    #imgInput { display: none; }
    
    /* Message images */
    .msg img {
      max-width: 100%;
      max-height: 300px;
      border-radius: 8px;
      margin-bottom: 5px;
    }
    
    /* System messages */
    .system-msg {
      align-self: center;
      background: transparent;
      color: #aaa;
      font-style: italic;
      text-align: center;
      padding: 5px 0;
    }
    
    /* Scrollbar styling */
    #chatLog::-webkit-scrollbar {
      width: 8px;
    }
    
    #chatLog::-webkit-scrollbar-track {
      background: #1e1e1e;
    }
    
    #chatLog::-webkit-scrollbar-thumb {
      background: #444;
      border-radius: 4px;
    }
    
    #chatLog::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
    
    /* Responsive adjustments */
    @media (max-width: 600px) {
      .msg {
        max-width: 85%;
      }
      
      .chat-controls {
        padding: 10px;
      }
      
      #skipBtn {
        padding: 8px 12px;
        font-size: 0.9em;
      }
    }
  </style>
</head>
<body>

  <!-- AdSense Banner Ad -->
  <div class="ad-container">
    <div class="ad-banner">
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-7059052735946479"
     data-ad-slot="3754934215"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    </div>
  </div>

  <div id="chatLog"></div>

  <div class="chat-controls">
    <button id="skipBtn"><i class="fas fa-random"></i> Skip</button>
    
    <div class="input-area">
      <input type="text" id="msgInput" placeholder="Type your message..." />
      <div class="input-icons">
        <label for="imgInput" class="icon-btn"><i class="fas fa-image"></i></label>
        <button id="sendBtn" class="icon-btn"><i class="fas fa-paper-plane"></i></button>
      </div>
    </div>
  </div>
  <input type="file" id="imgInput" accept="image/*" />

<!-- PeerJS (v1.5.4) -->
<script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>

<!-- Firebase JS SDK (v11.8.1) -->
<script src="https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.8.1/firebase-database.js"></script>
  
  <script>
    // Firebase config
    const firebaseConfig = {
      databaseURL: "https://talkrush-76259-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let peer, myConn, myId, waitingRef;

    startPeer();

    function startPeer() {
      peer = new Peer();
      peer.on('open', (id) => {
        myId = id;
        tryToFindMatch();
      });
    }

    function tryToFindMatch() {
      waitingRef = db.ref("waiting");
      waitingRef.once('value', (snapshot) => {
        const list = snapshot.val();
        if (list) {
          for (let [key, otherId] of Object.entries(list)) {
            if (otherId !== myId) {
              db.ref("waiting/" + key).remove();
              connectToPeer(otherId);
              return;
            }
          }
        }
        // No match found, add self
        const newRef = waitingRef.push();
        newRef.set(myId);
        peer.on("connection", (conn) => {
          logSystem("Stranger connected");
          setupConnection(conn);
        });
      });
    }

    function connectToPeer(otherId) {
      const conn = peer.connect(otherId);
      conn.on("open", () => {
        logSystem("Connected to stranger");
        setupConnection(conn);
      });
    }

    function setupConnection(conn) {
      if (myConn) myConn.close();
      myConn = conn;
      conn.on("data", (data) => {
        if (typeof data === "string") {
          appendMessage("stranger", data);
        } else if (data.type === "image") {
          appendImage("stranger", data.blob);
        }
      });
      conn.on("close", () => {
        logSystem("Stranger disconnected");
      });
    }

    function appendMessage(sender, msg) {
      const div = document.createElement("div");
      div.className = "msg " + sender;
      div.textContent = msg;
      const time = document.createElement("div");
      time.className = "timestamp";
      time.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      div.appendChild(time);
      document.getElementById("chatLog").appendChild(div);
      scrollToBottom();
    }

    function appendImage(sender, blob) {
      const div = document.createElement("div");
      div.className = "msg " + sender;
      const img = document.createElement("img");
      img.src = blob;
      div.appendChild(img);
      const time = document.createElement("div");
      time.className = "timestamp";
      time.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      div.appendChild(time);
      document.getElementById("chatLog").appendChild(div);
      scrollToBottom();
    }

    function scrollToBottom() {
      const log = document.getElementById("chatLog");
      log.scrollTop = log.scrollHeight;
    }

    function logSystem(msg) {
      const div = document.createElement("div");
      div.className = "msg system-msg";
      div.textContent = msg;
      document.getElementById("chatLog").appendChild(div);
      scrollToBottom();
    }

    // Send message on Enter key
    document.getElementById("msgInput").addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        sendMessage();
      }
    });

    document.getElementById("sendBtn").onclick = sendMessage;

    function sendMessage() {
      const input = document.getElementById("msgInput");
      const msg = input.value.trim();
      if (msg && myConn) {
        myConn.send(msg);
        appendMessage("me", msg);
        input.value = "";
      }
    }

    document.getElementById("imgInput").addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (!file || !myConn) return;

      const reader = new FileReader();
      reader.onload = () => {
        myConn.send({ type: "image", blob: reader.result });
        appendImage("me", reader.result);
      };
      reader.readAsDataURL(file);
      e.target.value = ""; // Reset input
    });

    document.getElementById("skipBtn").onclick = () => {
      if (myConn) myConn.close();
      peer.destroy();
      document.getElementById("chatLog").innerHTML = "";
      logSystem("Looking for a new stranger...");
      startPeer();
    };
  </script>
</body>
</html>
