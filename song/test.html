<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YT Music Player</title>
</head>
<body>
  <input type="text" id="searchBox" placeholder="Search songs...">
  <button onclick="searchSongs()">Search</button>

  <ul id="results"></ul>
  <div id="player" style="display:none;"></div> <!-- Hidden player -->

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '1',
        width: '1',
        videoId: '',
        playerVars: {
          autoplay: 0,
          controls: 0,
          modestbranding: 1
        }
      });
    }

    async function searchSongs() {
      const query = document.getElementById('searchBox').value;
      const res = await fetch(`https://ytmusic-app-n55k.onrender.com/search?q=${query}`);
      const data = await res.json();

      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      data.forEach(song => {
        const li = document.createElement('li');
        li.textContent = `${song.title} - ${song.artist}`;
        li.style.cursor = "pointer";
        li.onclick = () => playSong(song.videoId);
        resultsDiv.appendChild(li);
      });
    }

    function playSong(videoId) {
      player.loadVideoById(videoId);
      player.playVideo();
    }
  </script>
</body>
</html>
