<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YT Music Player</title>
</head>
<body>
  <input type="text" id="searchBox" placeholder="Search songs...">
  <button onclick="searchSongs()">Search</button>

  <div id="results"></div>
  <div id="player"></div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '200',
        width: '300',
        videoId: '', // blank initially
        playerVars: {
          autoplay: 0,
          controls: 1
        }
      });
    }

    async function searchSongs() {
      const query = document.getElementById('searchBox').value;
      const res = await fetch(`https://ytmusic-app-n55k.onrender.com/search?q=${query}`);
      const data = await res.json();

      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      data.forEach(song => {
        const btn = document.createElement('button');
        btn.textContent = `${song.title} - ${song.artist}`;
        btn.onclick = () => playSong(song.videoId);
        resultsDiv.appendChild(btn);
        resultsDiv.appendChild(document.createElement('br'));
      });
    }

    function playSong(videoId) {
      player.loadVideoById(videoId);
    }
  </script>
</body>
</html>
