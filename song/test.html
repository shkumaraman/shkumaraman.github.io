<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MusicPlay (YouTube Music Clone)</title>
</head>
<body>
  <input type="text" id="searchBox" placeholder="Search songs...">
  <button id="searchBtn">Search</button>
  <ul id="results"></ul>
  <div id="player"></div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '0', width: '0', videoId: '',
        playerVars: { autoplay: 1, controls: 0, mute: 1 }
      });
    }

    async function search() {
      const q = document.getElementById('searchBox').value;
      const resp = await fetch(`/search?q=${encodeURIComponent(q)}`);
      const songs = await resp.json();
      const ul = document.getElementById('results');
      ul.innerHTML = '';
      songs.forEach(song => {
        const li = document.createElement('li');
        li.textContent = `${song.title} â€” ${song.artist}`;
        li.onclick = () => {
          player.loadVideoById(song.videoId);
          player.unMute();
        };
        ul.appendChild(li);
      });
    }

    document.getElementById('searchBtn').onclick = search;
  </script>
</body>
</html>
