<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FULL FREE KUNDALI â€“ ALL DATA</title>
  <style>
    body { font-family: Arial; background:#f5f5f5; }
    input, button { margin:4px; padding:6px; }
    pre { background:#000; color:#0f0; padding:10px; max-height:600px; overflow:auto; }
  </style>
</head>
<body>

<h2>COMPLETE FREE KUNDALI (ALL DATA)</h2>

<!-- INPUTS -->
<input id="date" type="text" value="16/10/2002" placeholder="DD/MM/YYYY"><br>
<input id="time" type="text" value="05:52:00" placeholder="HH:MM:SS"><br>
<input id="location" type="text" value="27.4246736,83.9144972" placeholder="Latitude,Longitude"><br>
<input id="timezone" type="number" value="5.5" step="0.5" placeholder="Timezone"><br><br>

<button onclick="fetchAll()">FETCH FULL KUNDALI</button>

<h3>RAW JSON OUTPUT</h3>
<pre id="output"></pre>

<script>
const API_KEY = "kT8NTaKyfs6Yn6j2KxmEwaVqen1iG2y11mKcd09o";
const BASE = "https://json.freeastrologyapi.com/";

function getBirthData() {
  const [dd, mm, yyyy] = date.value.split("/").map(Number);
  const [hours, minutes, seconds] = time.value.split(":").map(Number);
  const [latitude, longitude] = location.value.split(",").map(Number);

  return { year: yyyy, month: mm, date: dd, hours, minutes, seconds, latitude, longitude, timezone: +timezone.value };
}

async function call(endpoint, body) {
  try {
    const res = await fetch(BASE + endpoint, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-api-key": API_KEY
      },
      body: JSON.stringify(body)
    });
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    return res.json();
  } catch (err) {
    throw new Error(`Failed to fetch ${endpoint}: ${err.message}`);
  }
}

async function fetchAll() {
  const b = getBirthData();
  const data = {};
  const output = document.getElementById("output");
  output.textContent = "Fetching...";

  try {
    data.planets = await call("planets", b);
    data.planets_extended = await call("planets/extended", b);

    data.rasi_chart = await call("horoscope-chart-info", { ...b, chart_type:"rasi" });
    data.navamsa_chart = await call("navamsa-chart-info", b);

    data.ascendant = await call("ascendant-report", b);
    data.nakshatra = await call("nakshatra-report", b);
    data.panchang = await call("panchang", b);

    data.kalsarpa = await call("kalsarpa-details", b);
    data.manglik = await call("manglik", b);

    data.vimshottari_dasha = await call("vimshottari-dasha", b);
    data.current_dasha = await call("current-dasha", b);

    data.hora = await call("hora-muhurta", b);
    data.abujh_muhurta = await call("abujh-muhurta", b);

    data.char_dasha = await call("char-dasha", b);
    data.yogini_dasha = await call("yogini-dasha", b);

    output.textContent = JSON.stringify(data, null, 2);

  } catch (e) {
    output.textContent = "ERROR: " + e.message;
  }
}
</script>

</body>
</html>
