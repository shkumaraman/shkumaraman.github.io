---
layout: default
title: "Anonymous Posts"
description: "Share your thoughts anonymously. Post, like, and interact with others without revealing your identity."
---

<style>
:root {
  /* Dark Theme Colors */
  --dark-bg: #121212;
  --dark-header-bg: #181818;
  --dark-header-border: #2a2a2a;
  --dark-chat-bg: #1e1e1e;
  --dark-msg-bg: #2b2b2b;
  --dark-msg-me: #007bff;
  --dark-text: #fff;
  --dark-secondary-text: #aaa;
  --dark-input-bg: #333;
  --dark-input-focus: #444;
  --dark-icon-color: #ccc;
  --dark-icon-hover-bg: rgba(255,255,255,0.1);
  --dark-scroll-thumb: #444;
  --dark-scroll-hover: #555;

  /* Light Theme Colors */
  --light-bg: #f5f5f5;
  --light-header-bg: #ffffff;
  --light-header-border: #e0e0e0;
  --light-chat-bg: #f9f9f9;
  --light-msg-bg: #e9e9e9;
  --light-msg-me: #007bff;
  --light-text: #333;
  --light-secondary-text: #666;
  --light-input-bg: #e0e0e0;
  --light-input-focus: #d0d0d0;
  --light-icon-color: #666;
  --light-icon-hover-bg: rgba(0,0,0,0.05);
  --light-scroll-thumb: #ccc;
  --light-scroll-hover: #aaa;
}

* {
  box-sizing: border-box;
}

html, body {
  overflow-x: hidden;
}
  
body {
  margin: 0;
  padding: 0;
  font-family: 'Segoe UI', sans-serif;
  background: var(--dark-bg);
  color: var(--dark-text);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  transition: background 0.3s, color 0.3s;
}

body.light-mode {
  background: var(--light-bg);
  color: var(--light-text);
}

.app-header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 50px;
  background: var(--dark-header-bg);
  padding: 8px 15px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 15px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.4);
  border-bottom: 1px solid var(--dark-header-border);
  z-index: 10000;
}

.light-mode .app-header {
  background: var(--light-header-bg);
  border-bottom: 1px solid var(--light-header-border);
}

.header-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}
  
.logo {
  height: 40px;
  width: 40px;
  border-radius: 10px;
}

.app-title {
  font-size: 1em;
  color: var(--dark-text);
  margin: 0;
}

.light-mode .app-title {
  color: var(--light-text);
}

.theme-toggle {
  background: none;
  border: none;
  color: var(--dark-icon-color);
  font-size: 1.1em;
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s;
}

.theme-toggle:hover {
  background: var(--dark-icon-hover-bg);
}

.light-mode .theme-toggle {
  color: var(--light-icon-color);
}

.light-mode .theme-toggle:hover {
  background: var(--light-icon-hover-bg);
}

.share-btn {
  background: #25D366;
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 0.9em;
  transition: background 0.2s;
}

.main-container {
  max-width: 600px;
  margin: 60px auto 20px;
  padding: 20px;
  width: 100%;
}

.post-form {
  background: var(--dark-msg-bg);
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.light-mode .post-form {
  background: var(--light-msg-bg);
}

.post-input-container {
  position: relative;
  margin-bottom: 10px;
}

#postText {
  width: 100%;
  height: 100px;
  padding: 12px 45px 12px 12px;
  border-radius: 10px;
  border: none;
  background: var(--dark-input-bg);
  color: var(--dark-text);
  font-size: 1em;
  outline: none;
  resize: vertical;
  font-family: 'Segoe UI', sans-serif;
}

#postText:focus {
  background: var(--dark-input-focus);
}

.light-mode #postText {
  background: var(--light-input-bg);
  color: var(--light-text);
}

.light-mode #postText:focus {
  background: var(--light-input-focus);
}

.post-submit-icon {
  position: absolute;
  bottom: 10px;
  right: 10px;
  background: var(--dark-msg-me);
  color: white;
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
}

.post-submit-icon:hover {
  transform: scale(1.1);
}

.post-submit-btn {
  background: var(--dark-msg-me);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 1em;
  transition: all 0.3s;
}

.post-submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

.post {
  background: var(--dark-msg-bg);
  margin-top: 15px;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  transition: all 0.3s;
}

.light-mode .post {
  background: var(--light-msg-bg);
}

.post:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.post-author {
  font-weight: bold;
  color: var(--dark-msg-me);
  margin-bottom: 8px;
  font-size: 0.9em;
}

.light-mode .post-author {
  color: var(--light-msg-me);
}

.post-content {
  margin-bottom: 10px;
  line-height: 1.4;
}

.timestamp {
  font-size: 0.8em;
  color: var(--dark-secondary-text);
  margin-bottom: 10px;
}

.light-mode .timestamp {
  color: var(--light-secondary-text);
}

.post-buttons {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.like-btn, .dislike-btn, .share-post-btn {
  background: none;
  border: 1px solid var(--dark-icon-color);
  color: var(--dark-icon-color);
  padding: 6px 12px;
  border-radius: 15px;
  cursor: pointer;
  font-size: 0.85em;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 5px;
}

.like-btn:hover, .dislike-btn:hover, .share-post-btn:hover {
  background: var(--dark-icon-hover-bg);
  transform: translateY(-1px);
}

.light-mode .like-btn, 
.light-mode .dislike-btn, 
.light-mode .share-post-btn {
  border: 1px solid var(--light-icon-color);
  color: var(--light-icon-color);
}

.light-mode .like-btn:hover, 
.light-mode .dislike-btn:hover, 
.light-mode .share-post-btn:hover {
  background: var(--light-icon-hover-bg);
}

.like-btn.active {
  background: #4CAF50;
  color: white;
  border-color: #4CAF50;
}

.dislike-btn.active {
  background: #f44336;
  color: white;
  border-color: #f44336;
}

.like-btn.active:hover {
  background: #45a049;
}

.dislike-btn.active:hover {
  background: #da190b;
}

/* Scrollbar styling */
body::-webkit-scrollbar {
  width: 8px;
}

body::-webkit-scrollbar-track {
  background: var(--dark-bg);
}

body::-webkit-scrollbar-thumb {
  background: var(--dark-scroll-thumb);
  border-radius: 4px;
}

body::-webkit-scrollbar-thumb:hover {
  background: var(--dark-scroll-hover);
}

.light-mode body::-webkit-scrollbar-track {
  background: var(--light-bg);
}

.light-mode body::-webkit-scrollbar-thumb {
  background: var(--light-scroll-thumb);
}

.light-mode body::-webkit-scrollbar-thumb:hover {
  background: var(--light-scroll-hover);
}

/* Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  padding: 20px;
  box-sizing: border-box;
}

.modal-content {
  background: white;
  color: #333;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  max-width: 400px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.modal-buttons {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 20px 0;
}

.modal-btn {
  border: none;
  background: #333;
  color: white;
  padding: 12px 15px;
  cursor: pointer;
  border-radius: 5px;
  font-size: 16px;
  font-weight: bold;
  width: 100%;
  transition: all 0.3s ease;
}

.modal-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

/* Responsive adjustments */
@media (max-width: 600px) {
  .main-container {
    margin: 50px auto 10px;
    padding: 10px;
  }
  
  .share-btn span {
    display: none;
  }
  
  .share-btn {
    padding: 8px;
  }
}
</style>

<!-- Nickname Modal -->
<div id="nicknameModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <h3>Choose Your Nickname</h3>
    <p>Pick a name that will be displayed with your posts</p>
    <input type="text" id="nicknameInput" placeholder="Anjali123" maxlength="20" 
           style="width: 100%; padding: 10px; margin: 15px 0; border-radius: 5px; border: 1px solid #ccc;">
    <div class="modal-buttons">
      <button onclick="saveNickname()" class="modal-btn">
        Continue
      </button>
    </div>
  </div>
</div>

<div class="app-header">
  <div class="header-left">
    <button class="menu-btn" onclick="toggleMenu()">&#9776;</button>
    <img src="logo.png" alt="TalkRush Logo" class="logo">
    <h1 class="app-title">Anonymous Posts</h1>
  </div>
  <div class="header-right">
    <button class="theme-toggle" id="themeToggle" title="Toggle Dark/Light Mode">
      <i class="fas fa-moon"></i>
    </button>
    <button id="shareBtn" class="share-btn">
      <i class="fa-solid fa-arrow-up-from-bracket"></i>
      <span>Share</span>
    </button>
  </div>
</div>

<div class="main-container">
  <div class="post-form">
    <div class="post-input-container">
      <textarea id="postText" placeholder="Share your thoughts anonymously..."></textarea>
      <button class="post-submit-icon" onclick="submitPost()" title="Post">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
    <button class="post-submit-btn" onclick="submitPost()">
      Post Anonymously
    </button>
  </div>

  <div id="postsContainer"></div>
</div>

<script>
// Firebase config
const firebaseConfig = {
  databaseURL: "https://talkrush-76259-default-rtdb.asia-southeast1.firebasedatabase.app/"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let myId;
let myNickname = 'Guest';
let nicknameSet = false;
let userReactions = JSON.parse(localStorage.getItem('postReactions') || '{}');

// Bad word filter system
let bannedWords = [];
let bannedWordsLoaded = false;

// Load the banned words from filter.txt
async function loadBannedWords() {
  try {
    const response = await fetch('filter.txt');
    const text = await response.text();
    bannedWords = text.split('\n')
      .map(word => word.trim().toLowerCase())
      .filter(word => word.length > 0);
    bannedWordsLoaded = true;
    console.log("Banned words loaded successfully:", bannedWords.length);
  } catch (err) {
    console.error("Error loading banned words:", err);
    bannedWords = ['badword1', 'badword2', 'swearword'];
    bannedWordsLoaded = true;
  }
}

// Enhanced check for banned words
function containsBannedWords(message) {
  if (!bannedWordsLoaded || !message || typeof message !== 'string') return false;
  
  const lowerMsg = message.toLowerCase();
  return bannedWords.some(word => {
    if (!word || word.length < 2) return false;
    const escapedWord = word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    const pattern = new RegExp(`\\b${escapedWord}\\b`, 'i');
    return pattern.test(message);
  });
}

// Initialize when page loads
function initializeApp() {
  myId = 'user_' + Math.random().toString(36).substr(2, 9);
  loadBannedWords();

  // Check if nickname exists in localStorage
  const savedNickname = localStorage.getItem('talkrush_nickname');
  const nicknameInput = document.getElementById('nicknameInput');

  if (savedNickname) {
    myNickname = savedNickname;
    nicknameSet = true;
    if (nicknameInput) nicknameInput.value = myNickname;
  }

  // Show nickname modal if not set
  if (!nicknameSet) {
    showNicknameModal();
  }

  loadPosts();
  setupTheme();
  setupShareButton();
  
  // Check URL for shared post
  checkSharedPost();
}

function showNicknameModal() {
  const modal = document.getElementById('nicknameModal');
  const nicknameInput = document.getElementById('nicknameInput');
  modal.style.display = 'flex';
  nicknameInput.focus();
  
  const savedNickname = localStorage.getItem('talkrush_nickname');
  if (savedNickname) {
    nicknameInput.value = savedNickname;
  }
}

function saveNickname() {
  const nicknameInput = document.getElementById('nicknameInput');
  const newNickname = nicknameInput.value.trim();

  if (!newNickname) {
    alert("Please enter a nickname");
    return;
  }

  if (containsBannedWords(newNickname)) {
    alert("Nickname contains inappropriate words");
    return;
  }

  myNickname = newNickname.substring(0, 20);
  nicknameSet = true;
  document.getElementById('nicknameModal').style.display = 'none';
  localStorage.setItem('talkrush_nickname', myNickname);
}

function submitPost() {
  const text = document.getElementById("postText").value.trim();
  if (text === "") {
    alert("Write something!");
    return;
  }
  
  if (containsBannedWords(text)) {
    alert("Your post contains inappropriate content and cannot be posted.");
    return;
  }
  
  const newPostRef = db.ref("posts").push();
  newPostRef.set({
    text: text,
    timestamp: Date.now(),
    likes: 0,
    dislikes: 0,
    author: myNickname,
    authorId: myId
  });

  document.getElementById("postText").value = "";
}

function loadPosts() {
  const postsContainer = document.getElementById("postsContainer");

  db.ref("posts").on("value", snapshot => {
    postsContainer.innerHTML = "";
    const posts = snapshot.val();
    if (!posts) {
      postsContainer.innerHTML = '<div class="post" style="text-align: center; color: var(--dark-secondary-text);">No posts yet. Be the first to share!</div>';
      return;
    }

    // Sort by latest
    const sortedPosts = Object.entries(posts).sort((a, b) => b[1].timestamp - a[1].timestamp);

    sortedPosts.forEach(([postId, post]) => {
      const div = document.createElement("div");
      div.className = "post";
      div.id = `post-${postId}`;

      const userReaction = userReactions[postId];
      const likeActive = userReaction === 'like' ? 'active' : '';
      const dislikeActive = userReaction === 'dislike' ? 'active' : '';

      div.innerHTML = `
        <div class="post-author">${post.author || 'Anonymous'}</div>
        <div class="post-content">${post.text}</div>
        <div class="timestamp">${timeSince(post.timestamp)}</div>
        <div class="post-buttons">
          <button class="like-btn ${likeActive}" onclick="reactToPost('${postId}', 'like')">
            <i class="fas fa-thumbs-up"></i> <span>${post.likes || 0}</span>
          </button>
          <button class="dislike-btn ${dislikeActive}" onclick="reactToPost('${postId}', 'dislike')">
            <i class="fas fa-thumbs-down"></i> <span>${post.dislikes || 0}</span>
          </button>
          <button class="share-post-btn" onclick="sharePost('${postId}')">
            <i class="fas fa-share"></i> Share
          </button>
        </div>
      `;

      postsContainer.appendChild(div);
    });
  });
}

function reactToPost(postId, reaction) {
  // Check if user already reacted to this post
  if (userReactions[postId]) {
    const previousReaction = userReactions[postId];
    
    // If clicking the same reaction, remove it
    if (previousReaction === reaction) {
      removeReaction(postId, reaction);
      return;
    }
    
    // If changing reaction, remove previous and add new
    removeReaction(postId, previousReaction);
  }
  
  // Add new reaction
  const ref = db.ref("posts/" + postId + "/" + reaction + "s");
  ref.transaction(current => (current || 0) + 1);
  
  // Save user reaction
  userReactions[postId] = reaction;
  localStorage.setItem('postReactions', JSON.stringify(userReactions));
  
  // Update UI
  updatePostButtons(postId);
}

function removeReaction(postId, reaction) {
  const ref = db.ref("posts/" + postId + "/" + reaction + "s");
  ref.transaction(current => Math.max(0, (current || 0) - 1));
  
  // Remove user reaction
  delete userReactions[postId];
  localStorage.setItem('postReactions', JSON.stringify(userReactions));
  
  // Update UI
  updatePostButtons(postId);
}

function updatePostButtons(postId) {
  const postElement = document.getElementById(`post-${postId}`);
  if (!postElement) return;
  
  const likeBtn = postElement.querySelector('.like-btn');
  const dislikeBtn = postElement.querySelector('.dislike-btn');
  const userReaction = userReactions[postId];
  
  likeBtn.classList.remove('active');
  dislikeBtn.classList.remove('active');
  
  if (userReaction === 'like') {
    likeBtn.classList.add('active');
  } else if (userReaction === 'dislike') {
    dislikeBtn.classList.add('active');
  }
}

function sharePost(postId) {
  const postUrl = `${window.location.origin}${window.location.pathname}?post=${postId}`;
  
  if (navigator.share) {
    navigator.share({
      title: 'Check out this post',
      text: 'Someone shared a post anonymously',
      url: postUrl
    });
  } else {
    navigator.clipboard.writeText(postUrl).then(() => {
      alert('Post link copied to clipboard!');
    });
  }
}

function checkSharedPost() {
  const urlParams = new URLSearchParams(window.location.search);
  const sharedPostId = urlParams.get('post');
  
  if (sharedPostId) {
    setTimeout(() => {
      const postElement = document.getElementById(`post-${sharedPostId}`);
      if (postElement) {
        postElement.scrollIntoView({ behavior: 'smooth' });
        postElement.style.background = 'var(--dark-msg-me)';
        setTimeout(() => {
          postElement.style.background = '';
        }, 2000);
      }
    }, 1000);
  }
}

function timeSince(ts) {
  const seconds = Math.floor((Date.now() - ts) / 1000);
  const intervals = [
    [31536000, 'year'],
    [2592000, 'month'],
    [86400, 'day'],
    [3600, 'hour'],
    [60, 'minute'],
    [1, 'second']
  ];
  for (const [unit, label] of intervals) {
    const count = Math.floor(seconds / unit);
    if (count >= 1) return `${count} ${label}${count > 1 ? 's' : ''} ago`;
  }
  return "just now";
}

function setupTheme() {
  const themeToggle = document.getElementById('themeToggle');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  const savedTheme = localStorage.getItem('theme');
  
  if (savedTheme === 'light' || (!savedTheme && !prefersDark)) {
    document.body.classList.add('light-mode');
    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
  } else {
    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
  }
  
  themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('light-mode');
    if (document.body.classList.contains('light-mode')) {
      localStorage.setItem('theme', 'light');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    } else {
      localStorage.setItem('theme', 'dark');
      themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
    }
  });
}

function setupShareButton() {
  const shareBtn = document.getElementById('shareBtn');
  shareBtn.addEventListener('click', () => {
    if (navigator.share) {
      navigator.share({
        title: 'Anonymous Posts',
        text: 'Share your thoughts anonymously with others',
        url: window.location.href
      });
    } else {
      navigator.clipboard.writeText(window.location.href).then(() => {
        alert('Link copied to clipboard!');
      });
    }
  });
}

// Close modal when clicking outside
document.addEventListener('click', function(e) {
  const modal = document.getElementById('nicknameModal');
  if (e.target === modal) {
    modal.style.display = 'none';
    if (!nicknameSet) {
      myNickname = 'Guest_' + Math.random().toString(36).substr(2, 5);
      nicknameSet = true;
      localStorage.setItem('talkrush_nickname', myNickname);
    }
  }
});

// Enter key to submit post
document.getElementById('postText').addEventListener('keypress', (e) => {
  if (e.key === 'Enter' && e.ctrlKey) {
    submitPost();
  }
});

window.addEventListener('load', initializeApp);
</script>

{% include music.html %}
{% include users-count.html %}
{% include menu.html %}
{% include scripts.html %}
