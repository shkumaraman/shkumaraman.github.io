<div id="pwa-install-bar" style="display:none; position:fixed; top:0; left:0; right:0; z-index:1000; background:#121212; color:white; padding:10px 20px; display:flex; align-items:center; justify-content:space-between;">
  <span style="font-weight:bold;">Install TalkRush</span>
  
  <div style="display:flex; align-items:center; gap:10px;">
    <button id="installBtn" style="background:#ffffff; color:#121212; border:none; padding:6px 14px; border-radius:6px; font-weight:bold; cursor:pointer;">
      Install
    </button>
    <button id="closeBtn" style="background:transparent; color:white; border:none; font-size:20px; cursor:pointer; line-height:1;">
      &times;
    </button>
  </div>
</div>

<script>
let deferredPrompt;
const bar = document.getElementById("pwa-install-bar");
const installBtn = document.getElementById("installBtn");
const closeBtn = document.getElementById("closeBtn");

// Helper â†’ hide bar
function hideBar() {
  bar.style.display = "none";
}

// Check agar already installed hai â†’ bar kabhi mat dikhao
const isStandalone =
  window.matchMedia("(display-mode: standalone)").matches ||
  window.navigator.standalone === true;

if (!isStandalone) {
  window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
    bar.style.display = "flex"; // sirf yaha show hoga
  });
}

// Install button
installBtn.addEventListener("click", () => {
  hideBar();
  if (deferredPrompt) {
    deferredPrompt.prompt();
    deferredPrompt.userChoice.finally(() => {
      deferredPrompt = null;
    });
  }
});

// Close button
closeBtn.addEventListener("click", () => {
  hideBar();
});

// Jab app install ho jaye â†’ bar permanently hide
window.addEventListener("appinstalled", () => {
  hideBar();
  console.log("PWA installed successfully ðŸŽ‰");
});
</script>
