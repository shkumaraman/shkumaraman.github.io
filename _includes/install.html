<div style="
  width: 90%;
  max-width: 600px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 15px;
  @media (min-width: 601px) {
    flex-direction: row;
  }
">

  <div style="
    background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 22px;
    border-radius: 16px;
    box-shadow: 0 10px 25px -5px rgba(0,0,0,0.5), 0 0 0 1px rgba(37, 211, 102, 0.2) inset;
    border: 1px solid rgba(255,255,255,0.05);
    flex: 1;
  ">
    <div style="display: flex; align-items: center; gap: 14px;">
      <div style="
        background: rgba(37, 211, 102, 0.15);
        padding: 10px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
      ">
        <i class="fab fa-whatsapp" style="font-size: 26px; color: #25D366; filter: drop-shadow(0 2px 5px rgba(37,211,102,0.3));"></i>
      </div>
      <div>
        <span style="font-size: 16px; font-weight: 600; letter-spacing: -0.2px; display: block; margin-bottom: 2px;">WhatsApp Channel</span>
        <span style="font-size: 13px; opacity: 0.7; font-weight: 400;">Join for updates</span>
      </div>
    </div>
    <a href="https://whatsapp.com/channel/0029Vb6oERYGU3BSWXxtI40Z" target="_blank" style="
      background: linear-gradient(145deg, #25D366, #20b859);
      color: #121212;
      padding: 10px 24px;
      border-radius: 40px;
      font-weight: 600;
      text-decoration: none;
      font-size: 15px;
      box-shadow: 0 8px 15px -5px rgba(37,211,102,0.4);
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.2s ease;
    " onmouseover="this.style.transform='scale(1.02)';this.style.boxShadow='0 10px 20px -5px rgba(37,211,102,0.6)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='0 8px 15px -5px rgba(37,211,102,0.4)'">
      Join
    </a>
  </div>

  <div id="pwa-install-bar" 
       style="
              background: linear-gradient(135deg, #e91e63, #9c27b0);
              display: flex;
              flex-direction: row;
              align-items: center;
              justify-content: space-between;
              gap: 10px;
              border-radius: 16px;
              padding: 16px 22px;
              border: 2px solid rgba(255,255,255,0.3);
              box-shadow: 0 10px 25px -5px rgba(0,0,0,0.3);
              color: white;
              flex: 1;
              @media (max-width: 600px) {
                flex-direction: column;
                text-align: center;
                padding: 20px;
              }">

    <div style="display: flex; align-items: center; gap: 12px; @media (max-width: 600px) { margin-bottom: 8px; }">
      <div style="
        background: rgba(255,255,255,0.15);
        padding: 10px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
      ">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 4V20M20 12H4" stroke="white" stroke-width="2" stroke-linecap="round"/>
          <circle cx="12" cy="12" r="9" stroke="white" stroke-width="2"/>
        </svg>
      </div>
      <div>
        <span style="font-size: 16px; font-weight: 700; display: block; margin-bottom: 2px;">TalkRush App</span>
        <span style="font-size: 13px; opacity: 0.9; font-weight: 400;">Add to home screen</span>
      </div>
    </div>

    <button id="installBtn" 
            style="background:#ffffff; color:#9c27b0; border:none; padding: 10px 28px; 
                   border-radius: 10px; font-weight:600; cursor:pointer; font-size: 15px;
                   box-shadow:0 8px 15px -5px rgba(0,0,0,0.3);
                   border: 1px solid rgba(255,255,255,0.1);
                   transition: all 0.2s ease;
                   white-space: nowrap;
                   @media (max-width: 600px) {
                     width: 100%;
                   }"
            onmouseover="this.style.transform='scale(1.02)';this.style.background='#f5f5f5'"
            onmouseout="this.style.transform='scale(1)';this.style.background='#ffffff'">
      Install
    </button>
  </div>

</div>

<style>
  @media (min-width: 601px) {
    div[style*="max-width: 600px"] {
      flex-direction: row !important;
    }
  }
</style>

<script>
let deferredPrompt;

document.addEventListener("DOMContentLoaded", () => {
  const bar = document.getElementById("pwa-install-bar");
  const installBtn = document.getElementById("installBtn");

  window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
  });

  installBtn.onclick = () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then((choiceResult) => {
        deferredPrompt = null;
      });
    } else {
      alert('App is ready to install');
    }
  };

  window.addEventListener("appinstalled", () => {
    bar.style.display = "none";
  });
});
</script>
