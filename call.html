<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Free Voice Call</title>
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      font-family: 'Arial', sans-serif;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin: 0 10px;
    }

    #local-stream {
      width: 0;
      height: 0;
      position: absolute;
      top: -1000px;
    }
  </style>
</head>
<body>
  <button id="startCall">Start Call</button>
  <button id="endCall">End Call</button>
  <audio id="local-stream" autoplay></audio>

  <script src="https://cdn.agora.io/sdk/release/AgoraRTCSDK-3.6.2.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var agoraAppId = '2f7794f8b7e64b6b9b24d2b4c7d7b405'; // Replace with your Agora App ID
      var client = AgoraRTC.createClient({ mode: 'rtc', codec: 'vp8' });
      var localStream;

      document.getElementById('startCall').addEventListener('click', function () {
        client.init(agoraAppId, function () {
          console.log('AgoraRTC client initialized');

          client.join(null, 'your_channel_name', null, function (uid) {
            localStream = AgoraRTC.createStream({
              streamID: uid,
              audio: true,
              video: false,
              screen: false,
            });

            localStream.init(function () {
              localStream.play('local-stream');

              client.publish(localStream, function (err) {
                console.log('Publish local stream error: ' + err);
              });
            });
          });
        });
      });

      document.getElementById('endCall').addEventListener('click', function () {
        client.unpublish(localStream, function (err) {
          console.log('Unpublish local stream error: ' + err);
        });

        client.leave(function () {
          console.log('Leave channel success');
        });
      });
    });
  </script>
</body>
</html>
