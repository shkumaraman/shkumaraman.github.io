<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .box {
      background: white;
      padding: 20px;
      width: 320px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
    }
    button {
      background: #1e90ff;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div class="box">
  <h3>Payment</h3>

  <input id="amount" type="number" placeholder="Amount (â‚¹)" />
  <input id="name" type="text" placeholder="Name" />
  <input id="email" type="email" placeholder="Email" />
  <input id="contact" type="text" placeholder="Mobile Number" />

  <button onclick="pay()">Pay Now</button>
</div>

<script>
async function pay() {
  const amount = document.getElementById("amount").value;
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const contact = document.getElementById("contact").value;

  if (!amount || amount <= 0) {
    alert("Enter valid amount");
    return;
  }

  const res = await fetch("https://payment-drag.onrender.com/create-order", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount })
  });

  const order = await res.json();

  const options = {
    key: order.key,
    amount: order.amount,
    currency: order.currency,
    order_id: order.order_id,
    name: "Payment",
    description: "Payment",
    prefill: {
      name,
      email,
      contact
    },
    handler: async function (response) {
      const verify = await fetch("https://payment-drag.onrender.com/verify-payment", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(response)
      });

      const result = await verify.json();
      alert("Payment Status: " + result.status);
    }
  };

  const rzp = new Razorpay(options);
  rzp.open();

  rzp.on("payment.failed", function (resp) {
    alert("Payment Failed: " + resp.error.description);
  });
}
</script>

</body>
</html>
