---
layout: default
title: "MusicPlay"
description: "MusicPlay â€“ Listen to your favorite songs online. Search, play, shuffle, loop, and enjoy trending tracks with a fast and responsive music player."
---
<style>
    :root {
      --bg-primary: #121212;
      --bg-secondary: #1e1e1e;
      --accent-color: #1db954;
      --text-primary: #ffffff;
      --text-secondary: #bbbbbb;
      --track-height: 50px;
      --header-height: 60px;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      color: var(--text-primary);
      min-height: 100vh;
      padding-top: calc(var(--header-height) + 20px);
      padding-bottom: 180px;
      padding-left: 20px;
      padding-right: 20px;
      line-height: 1.6;
      position: relative;
    }
    
    /* Fixed Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--header-height);
      background: rgba(18, 18, 18, 0.95);
      display: flex;
      align-items: center;
      padding: 0 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      backdrop-filter: blur(10px);
    }
    
    .brand {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--accent-color);
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    #search-container {
      display: flex;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      border-radius: 30px;
      overflow: hidden;
      background: var(--bg-secondary);
      height: 42px;
    }
    
    #search {
      flex: 1;
      padding: 8px 20px;
      border: none;
      background: transparent;
      color: var(--text-primary);
      font-size: 14px;
      outline: none;
    }
    
    #search::placeholder {
      color: #888;
    }
    
    #search-btn {
      background: var(--accent-color);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.3s;
      margin: 2px;
    }
    
    #search-btn:hover {
      background: #1ed760;
    }
    
    #results {
      margin-top: 15px;
      max-height: calc(100vh - 300px);
      overflow-y: auto;
    }
    
    .track {
      display: flex;
      align-items: center;
      height: var(--track-height);
      margin: 8px 0;
      padding: 8px;
      background: var(--bg-secondary);
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    
    .track:hover {
      background: #2a2a2a;
      transform: translateY(-2px);
    }
    
    .track.playing {
      background: #1db95433;
      border-left: 4px solid var(--accent-color);
    }
    
    .track img {
      width: 40px;
      height: 40px;
      border-radius: 5px;
      margin-right: 12px;
      object-fit: cover;
    }
    
    .track-info {
      flex: 1;
      overflow: hidden;
    }
    
    .track-title {
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .track-channel {
      font-size: 12px;
      color: var(--text-secondary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .player-section {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(30, 30, 30, 0.95);
      padding: 12px 20px;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      z-index: 1000;
    }
    
    .player-bg-thumbnail {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0.15;
      z-index: -1;
      filter: blur(8px);
    }
    
    .player-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .now-playing {
      display: flex;
      align-items: center;
      flex: 1;
    }
    
    .now-playing img {
      width: 45px;
      height: 45px;
      border-radius: 5px;
      margin-right: 12px;
    }
    
    .track-details {
      flex: 1;
    }
    
    .track-name {
      font-size: 14px;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 180px;
    }
    
    .channel-name {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    .player-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 2;
    }
    
    .control-btn {
      background: none;
      border: none;
      color: var(--text-primary);
      font-size: 16px;
      margin: 0 8px;
      cursor: pointer;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s;
    }
    
    .control-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .play-pause {
      background: var(--accent-color);
      width: 40px;
      height: 40px;
      font-size: 16px;
    }
    
    .play-pause:hover {
      background: #1ed760;
    }
    
    .player-options {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      flex: 1;
    }
    
    #player {
      display: none;
    }
    
    .progress-container {
      width: 100%;
      height: 4px;
      background: #333;
      border-radius: 2px;
      margin-top: 8px;
      cursor: pointer;
      position: relative;
    }
    
    .progress-bar {
      height: 100%;
      background: var(--accent-color);
      border-radius: 2px;
      width: 0%;
    }
    
    .time-display {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-secondary);
      margin-top: 4px;
    }
    
    .section-title {
      font-size: 16px;
      margin: 15px 0 10px;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
    }
    
    .section-title i {
      margin-right: 8px;
    }
    
    .error-message {
      background: #ff4444;
      color: white;
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      text-align: center;
    }
    
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .loading-spinner {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 3px solid var(--accent-color);
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @media (max-width: 768px) {
      .player-container {
        flex-direction: column;
        gap: 12px;
      }
      
      .now-playing, .player-controls, .player-options {
        width: 100%;
        justify-content: center;
      }
      
      .track-name {
        max-width: 150px;
      }
      
      .brand {
        font-size: 1.3rem;
      }
    }
  </style>

  <!-- Fixed Header -->
  <div class="header">
    <div class="brand">MusicPlay</div>
  </div>

  <div class="container">
    <div id="search-container">
      <input type="text" id="search" placeholder="Search for a song or artist...">
      <button id="search-btn" onclick="searchVideos()">
        <i class="fas fa-search"></i>
      </button>
    </div>

    <div class="section-title" id="trending-title">
      <i class="fas fa-music"></i> Suggested Songs
    </div>
    <div id="trending-results"></div>

    <div class="section-title" id="results-title" style="display: none;">
      <i class="fas fa-search"></i> Search Results
    </div>
    <div id="results"></div>
    <div id="error-message" class="error-message" style="display: none;"></div>
  </div>

  <div class="player-section">
    <div class="player-bg-thumbnail" id="bg-thumbnail"></div>
    <div class="player-container">
      <div class="now-playing">
        <img id="current-thumbnail" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="Now playing">
        <div class="track-details">
          <div id="current-title" class="track-name">Nothing playing</div>
          <div id="current-channel" class="channel-name">Select a song to begin</div>
        </div>
      </div>

      <div class="player-controls">
        <button class="control-btn" onclick="shuffleTracks()" title="Shuffle">
          <i class="fas fa-random"></i>
        </button>
        <button class="control-btn" onclick="previousTrack()" title="Previous">
          <i class="fas fa-step-backward"></i>
        </button>
        <button class="control-btn play-pause" onclick="togglePlay()" title="Play/Pause" id="play-pause-btn">
          <i class="fas fa-play"></i>
        </button>
        <button class="control-btn" onclick="nextTrack()" title="Next">
          <i class="fas fa-step-forward"></i>
        </button>
        <button class="control-btn" onclick="toggleLoop()" title="Loop" id="loop-btn">
          <i class="fas fa-redo"></i>
        </button>
      </div>

      <div class="player-options">
        <!-- Volume controls removed as requested -->
      </div>
    </div>

    <div class="progress-container" id="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <div class="time-display">
      <span id="current-time">0:00</span>
      <span id="duration">0:00</span>
    </div>
  </div>

  <div id="player"></div>

  <script>
    // Load YouTube iFrame API
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(tag);

    // Global variables
    var player;
    var currentTrackIndex = 0;
    var tracks = [];
    var isShuffled = false;
    var isLooping = false;
    var isPlaying = false;
    var originalTracksOrder = [];
    var trendingSongs = [];
    var searchTimeout = null;
    var API_KEY = "AIzaSyCOJR4ZUYMLnq1Q43MnP1ssfYQICv79fLA";

    // Initialize player
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '0',
        width: '0',
        videoId: '',
        playerVars: {
          modestbranding: 1,
          controls: 0,
          rel: 0
        },
        events: {
          'onStateChange': onPlayerStateChange,
          'onReady': onPlayerReady
        }
      });
      
      // Load trending songs when player is ready
      loadTrendingSongs();
      
      // Add debounce to search input
      document.getElementById("search").addEventListener("input", function() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(function() {
          if (document.getElementById("search").value.trim() !== "") {
            searchVideos();
          }
        }, 500);
      });
    }

    function onPlayerReady(event) {
      updateProgressBar();
      // Set initial volume to 80%
      player.setVolume(80);
    }

    function onPlayerStateChange(event) {
      if (event.data == YT.PlayerState.ENDED) {
        if (isLooping) {
          player.playVideo();
        } else {
          nextTrack();
        }
      }
      
      if (event.data == YT.PlayerState.PLAYING) {
        isPlaying = true;
        document.getElementById('play-pause-btn').innerHTML = '<i class="fas fa-pause"></i>';
      } else if (event.data == YT.PlayerState.PAUSED || event.data == YT.PlayerState.ENDED) {
        isPlaying = false;
        document.getElementById('play-pause-btn').innerHTML = '<i class="fas fa-play"></i>';
      }
      
      updateProgressBar();
    }

    // Cache management functions
    function setCache(key, data, expiryHours = 6) {
      const now = new Date();
      const item = {
        value: data,
        expiry: now.getTime() + (expiryHours * 60 * 60 * 1000),
      };
      localStorage.setItem(key, JSON.stringify(item));
    }

    function getCache(key) {
      const itemStr = localStorage.getItem(key);
      if (!itemStr) return null;
      
      const item = JSON.parse(itemStr);
      const now = new Date();
      
      if (now.getTime() > item.expiry) {
        localStorage.removeItem(key);
        return null;
      }
      return item.value;
    }

    // API call with retry logic
    async function fetchWithRetry(url, retries = 3, backoff = 300) {
      try {
        const response = await fetch(url);
        const data = await response.json();
        
        if (data.error && data.error.code === 403) {
          throw new Error("API quota exceeded");
        }
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        return data;
      } catch (error) {
        if (retries > 0) {
          await new Promise(resolve => setTimeout(resolve, backoff));
          return fetchWithRetry(url, retries - 1, backoff * 2);
        } else {
          throw error;
        }
      }
    }

    // Load trending songs
    async function loadTrendingSongs() {
      const cacheKey = 'trending_songs';
      const cachedData = getCache(cacheKey);
      
      if (cachedData) {
        displayTrendingSongs(cachedData);
        return;
      }
      
      try {
        document.getElementById("trending-results").innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
        
        const query = "popular music songs 2023";
        const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(query)}&key=${API_KEY}&maxResults=7`;
        
        const data = await fetchWithRetry(url);
        
        if (data.items && data.items.length > 0) {
          setCache(cacheKey, data);
          displayTrendingSongs(data);
        }
      } catch (error) {
        console.error("Error loading trending songs:", error);
        showError("Unable to load songs. Please try again later.");
        document.getElementById("trending-results").innerHTML = "";
      }
    }

    function displayTrendingSongs(data) {
      const trendingDiv = document.getElementById("trending-results");
      trendingDiv.innerHTML = "";
      
      trendingSongs = data.items;
      
      data.items.forEach((item, index) => {
        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const channel = item.snippet.channelTitle;
        const thumbnail = item.snippet.thumbnails.default.url;

        const track = document.createElement("div");
        track.className = "track";
        track.dataset.index = index;

        const img = document.createElement("img");
        img.src = thumbnail;

        const trackInfo = document.createElement("div");
        trackInfo.className = "track-info";

        const titleDiv = document.createElement("div");
        titleDiv.className = "track-title";
        titleDiv.textContent = title;

        const channelDiv = document.createElement("div");
        channelDiv.className = "track-channel";
        channelDiv.textContent = channel;

        trackInfo.appendChild(titleDiv);
        trackInfo.appendChild(channelDiv);

        track.appendChild(img);
        track.appendChild(trackInfo);

        track.onclick = () => {
          // Hide trending section when a song is selected
          document.getElementById("trending-title").style.display = "none";
          document.getElementById("trending-results").style.display = "none";
          
          // Add to tracks array and play
          tracks = trendingSongs;
          originalTracksOrder = [...tracks];
          playTrack(index);
        };

        trendingDiv.appendChild(track);
      });
    }

    // Search for videos
    async function searchVideos() {
      const query = document.getElementById("search").value;
      if (!query) return;

      // Hide trending section when searching
      document.getElementById("trending-title").style.display = "none";
      document.getElementById("trending-results").style.display = "none";
      
      // Show results title
      document.getElementById("results-title").style.display = "flex";
      
      // Check cache first
      const cacheKey = `search_${query}`;
      const cachedData = getCache(cacheKey);
      
      if (cachedData) {
        displaySearchResults(cachedData);
        return;
      }
      
      try {
        document.getElementById("results").innerHTML = '<div class="loading"><div class="loading-spinner"></div></div>';
        hideError();
        
        const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(query + " music")}&key=${API_KEY}&maxResults=7`;
        
        const data = await fetchWithRetry(url);
        
        if (data.items && data.items.length > 0) {
          setCache(cacheKey, data);
          displaySearchResults(data);
        }
      } catch (error) {
        console.error("Error searching videos:", error);
        
        if (error.message === "API quota exceeded") {
          showError("YouTube API quota exceeded. Please try again tomorrow.");
        } else {
          showError("Unable to search. Please check your connection and try again.");
        }
        
        document.getElementById("results").innerHTML = "";
      }
    }

    function displaySearchResults(data) {
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      tracks = data.items;
      originalTracksOrder = [...tracks];

      data.items.forEach((item, index) => {
        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const channel = item.snippet.channelTitle;
        const thumbnail = item.snippet.thumbnails.default.url;

        const track = document.createElement("div");
        track.className = "track";
        track.dataset.index = index;

        const img = document.createElement("img");
        img.src = thumbnail;

        const trackInfo = document.createElement("div");
        trackInfo.className = "track-info";

        const titleDiv = document.createElement("div");
        titleDiv.className = "track-title";
        titleDiv.textContent = title;

        const channelDiv = document.createElement("div");
        channelDiv.className = "track-channel";
        channelDiv.textContent = channel;

        trackInfo.appendChild(titleDiv);
        trackInfo.appendChild(channelDiv);

        track.appendChild(img);
        track.appendChild(trackInfo);

        track.onclick = () => {
          playTrack(index);
        };

        resultsDiv.appendChild(track);
      });
    }

    // Error handling functions
    function showError(message) {
      const errorDiv = document.getElementById("error-message");
      errorDiv.textContent = message;
      errorDiv.style.display = "block";
    }

    function hideError() {
      document.getElementById("error-message").style.display = "none";
    }

    // Enable search on Enter key
    document.getElementById("search").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        clearTimeout(searchTimeout);
        searchVideos();
      }
    });

    // Play a specific track
    function playTrack(index) {
      if (tracks.length === 0) return;
      
      // Remove playing class from all tracks
      document.querySelectorAll('.track').forEach(track => {
        track.classList.remove('playing');
      });
      
      // Add playing class to current track
      if (document.querySelectorAll('.track')[index]) {
        document.querySelectorAll('.track')[index].classList.add('playing');
      }
      
      currentTrackIndex = index;
      const videoId = tracks[index].id.videoId;
      const title = tracks[index].snippet.title;
      const channel = tracks[index].snippet.channelTitle;
      const thumbnail = tracks[index].snippet.thumbnails.medium.url;
      
      player.loadVideoById(videoId);
      
      // Update UI
      document.getElementById('current-title').textContent = title;
      document.getElementById('current-channel').textContent = channel;
      document.getElementById('current-thumbnail').src = thumbnail;
      
      // Set background thumbnail with blur effect
      document.getElementById('bg-thumbnail').style.backgroundImage = `url(${thumbnail})`;
      
      document.getElementById('play-pause-btn').innerHTML = '<i class="fas fa-pause"></i>';
      isPlaying = true;
    }

    // Toggle play/pause
    function togglePlay() {
      if (!player.getVideoUrl()) {
        if (tracks.length > 0) {
          playTrack(0);
        }
        return;
      }
      
      if (isPlaying) {
        player.pauseVideo();
      } else {
        player.playVideo();
      }
    }

    // Play next track
    function nextTrack() {
      if (tracks.length === 0) return;
      
      let nextIndex = currentTrackIndex + 1;
      if (nextIndex >= tracks.length) {
        nextIndex = 0;
      }
      
      playTrack(nextIndex);
    }

    // Play previous track
    function previousTrack() {
      if (tracks.length === 0) return;
      
      let prevIndex = currentTrackIndex - 1;
      if (prevIndex < 0) {
        prevIndex = tracks.length - 1;
      }
      
      playTrack(prevIndex);
    }

    // Toggle loop
    function toggleLoop() {
      isLooping = !isLooping;
      const loopBtn = document.getElementById('loop-btn');
      if (isLooping) {
        loopBtn.style.color = 'var(--accent-color)';
      } else {
        loopBtn.style.color = '';
      }
    }

    // Toggle shuffle
    function shuffleTracks() {
      if (tracks.length === 0) return;
      
      isShuffled = !isShuffled;
      
      if (isShuffled) {
        // Shuffle the tracks array
        for (let i = tracks.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [tracks[i], tracks[j]] = [tracks[j], tracks[i]];
        }
      } else {
        // Restore original order
        tracks = [...originalTracksOrder];
      }
      
      // Update the UI to reflect new order
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";
      
      tracks.forEach((item, index) => {
        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const channel = item.snippet.channelTitle;
        const thumbnail = item.snippet.thumbnails.default.url;

        const track = document.createElement("div");
        track.className = "track";
        if (index === currentTrackIndex) {
          track.classList.add("playing");
        }
        track.dataset.index = index;

        const img = document.createElement("img");
        img.src = thumbnail;

        const trackInfo = document.createElement("div");
        trackInfo.className = "track-info";

        const titleDiv = document.createElement("div");
        titleDiv.className = "track-title";
        titleDiv.textContent = title;

        const channelDiv = document.createElement("div");
        channelDiv.className = "track-channel";
        channelDiv.textContent = channel;

        trackInfo.appendChild(titleDiv);
        trackInfo.appendChild(channelDiv);

        track.appendChild(img);
        track.appendChild(trackInfo);

        track.onclick = () => {
          playTrack(index);
        };

        resultsDiv.appendChild(track);
      });
    }

    // Update progress bar
    function updateProgressBar() {
      if (!player.getDuration) return;
      
      const progressBar = document.getElementById('progress-bar');
      const currentTimeElement = document.getElementById('current-time');
      const durationElement = document.getElementById('duration');
      
      const duration = player.getDuration();
      const currentTime = player.getCurrentTime();
      
      const progressPercent = (currentTime / duration) * 100;
      progressBar.style.width = `${progressPercent}%`;
      
      // Format time displays
      currentTimeElement.textContent = formatTime(currentTime);
      durationElement.textContent = formatTime(duration);
      
      if (isPlaying) {
        setTimeout(updateProgressBar, 1000);
      }
    }

    // Format time in minutes:seconds
    function formatTime(time) {
      const minutes = Math.floor(time / 60);
      const seconds = Math.floor(time % 60);
      return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }

    // Seek functionality
    document.getElementById('progress-container').addEventListener('click', function(e) {
      if (!player.getDuration) return;
      
      const rect = this.getBoundingClientRect();
      const clickX = e.clientX - rect.left;
      const width = rect.width;
      const seekTime = (clickX / width) * player.getDuration();
      
      player.seekTo(seekTime, true);
    });
  </script>
